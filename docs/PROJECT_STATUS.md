# DroneMaintenance-Ledger é¡¹ç›®è¿›å±•æŠ¥å‘Š

**æ›´æ–°æ—¶é—´**: 2026-01-16
**å½“å‰ç‰ˆæœ¬**: 0.1.0
**é¡¹ç›®çŠ¶æ€**: Phase 1 è¿›è¡Œä¸­ - API å¼€å‘å·²å®Œæˆï¼Œå¾…è¿ç§»æ‰§è¡Œ

---

## é¡¹ç›®æ¦‚è¿°

DroneMaintenance-Ledger æ˜¯ä¸€ä¸ªé¢å‘æ— äººæœºå’Œ eVTOL é£è¡Œå™¨çš„å¼€æº MROï¼ˆç»´æŠ¤ã€ç»´ä¿®å’Œè¿è¡Œï¼‰ç³»ç»Ÿã€‚å®ƒå……å½“ä½ç©ºé£è¡Œå™¨çš„"ç”µå­ç—…å†"ç³»ç»Ÿï¼Œè¿½è¸ªé›¶éƒ¨ä»¶å…¨ç”Ÿå‘½å‘¨æœŸã€ç»´ä¿è®¡åˆ’å’Œé€‚èˆªåˆè§„çŠ¶æ€ã€‚

### æ ¸å¿ƒè®¾è®¡ç†å¿µ

**é›¶éƒ¨ä»¶å±¥å†è§£è€¦**ï¼šé›¶éƒ¨ä»¶å±¥å†è·Ÿéšé›¶éƒ¨ä»¶ï¼Œè€Œä¸æ˜¯éšæœºèº«ã€‚å½“é›¶éƒ¨ä»¶ä»ä¸€æ¶é£æœºæ‹†ä¸‹å¹¶å®‰è£…åˆ°å¦ä¸€æ¶é£æœºæ—¶ï¼Œå…¶æ€»é£è¡Œå°æ—¶ã€ç»´ä¿®è®°å½•å’Œå¾ªç¯æ¬¡æ•°å¿…é¡»éšä¹‹è½¬ç§»ã€‚è¿™æ˜¯èˆªç©ºä¸šçš„è¡Œä¸šæ ‡å‡†å®è·µã€‚

---

## å…­å¤§æ ¸å¿ƒä¸­å¿ƒ

| ä¸­å¿ƒ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| 1. èµ„äº§é…ç½®ä¸­å¿ƒ | æœºé˜Ÿæ¡£æ¡ˆã€BOMæ ‘çŠ¶ç»“æ„ã€é›¶éƒ¨ä»¶å…¨ç”Ÿå‘½å‘¨æœŸè¿½è¸ª | âœ… Phase 0-1 å·²å®Œæˆ |
| 2. è®¡åˆ’ä¸å·¥ç¨‹ä¸­å¿ƒ | ç»´ä¿®å¤§çº²å®šä¹‰ã€å¤šç»´åº¦è§¦å‘å™¨ã€é¢„æµ‹æ€§é¢„è­¦ | ğŸ”„ æ•°æ®æ¨¡å‹å·²å®Œæˆï¼ŒAPI å¾…å®ç° |
| 3. é£è¡Œä¸æŠ€æœ¯è®°å½•æœ¬ | ç”µå­é£è¡Œè®°å½•ã€æ•…éšœæŠ¥å‘Š(PIREP)ã€é€‚èˆªæ”¾è¡Œ | âœ… API å·²å®Œæˆ |
| 4. ç»´ä¿®æ‰§è¡Œä¸­å¿ƒ | å·¥å•ç®¡ç†ã€æ•°å­—åŒ–å·¥å¡ã€å¸¦ RII çš„æ£€æŸ¥å• | âœ… API å·²å®Œæˆ |
| 5. åº“å­˜ä¸ä¾›åº”é“¾ | å¤šä»“åº“åº“å­˜ç®¡ç†ã€åº“å­˜é¢„è­¦ã€é›¶ä»¶é€‚ç”¨æ€§æ ¡éªŒ | â³ å¾…è§„åˆ’ |
| 6. æ•°æ®çœ‹æ¿ä¸æŠ¥è¡¨ | æœºé˜ŸçŠ¶æ€ã€é€‚èˆªå±¥å†ã€å¯é æ€§åˆ†æ | â³ å¾…è§„åˆ’ |

---

## å·²å®Œæˆå·¥ä½œ (Phase 0-1)

### 1. é¡¹ç›®åŸºç¡€è®¾æ–½
- [x] Monorepo ç»“æ„ (Turborepo + pnpm)
- [x] TypeScript ç»Ÿä¸€é…ç½®
- [x] ESLint ä»£ç è§„èŒƒ
- [x] å…±äº«é…ç½®åŒ… (@repo/config)
- [x] ä¾èµ–å®‰è£… (895 packages)

### 2. æ•°æ®åº“è®¾è®¡ (15ä¸ªæ ¸å¿ƒè¡¨)

#### æ ¸å¿ƒå®ä½“ (5è¡¨)
| è¡¨å | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `user` | ç”¨æˆ·è¡¨ (RBAC: 5ç§è§’è‰²) | âœ… |
| `fleet` | æœºé˜Ÿè¡¨ | âœ… |
| `aircraft` | é£æœºè¡¨ (çŠ¶æ€æœº: 4ç§çŠ¶æ€) | âœ… |
| `component` | é›¶éƒ¨ä»¶è¡¨ | âœ… |
| `component-installation` | è£…æœºè®°å½•è¡¨ | âœ… |

#### ç»´ä¿ç®¡ç† (7è¡¨)
| è¡¨å | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `maintenance-program` | ç»´ä¿è®¡åˆ’è¡¨ | âœ… |
| `maintenance-trigger` | ç»´ä¿è§¦å‘å™¨è¡¨ | âœ… |
| `maintenance-schedule` | ç»´ä¿è°ƒåº¦è¡¨ | âœ… |
| `maintenance-history` | ç»´ä¿å†å²è¡¨ | âœ… |
| `work-order` | å·¥å•è¡¨ | âœ… |
| `work-order-task` | å·¥å•ä»»åŠ¡è¡¨ | âœ… |
| `work-order-part` | å·¥å•é›¶ä»¶è¡¨ | âœ… |

#### é£è¡Œè®°å½• (3è¡¨)
| è¡¨å | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `flight-log` | é£è¡Œè®°å½•è¡¨ | âœ… |
| `pilot-report` | é£è¡Œå‘˜æŠ¥å‘Šè¡¨ (PIREP) | âœ… |
| `release-record` | æ”¾è¡Œè®°å½•è¡¨ | âœ… |

### 3. è®¤è¯ä¸æˆæƒç³»ç»Ÿ
- [x] å¯†ç åŠ å¯† (bcrypt)
- [x] ç”¨æˆ·æ³¨å†Œ API
- [x] ç™»å½• API (Local Strategy)
- [x] JWT è®¤è¯ (JWT Strategy)
- [x] è§’è‰²å®ˆå« (RBAC Guard)
- [x] ç”¨æˆ·ç®¡ç† API

### 4. èµ„äº§é…ç½®ä¸­å¿ƒ API

#### æœºé˜Ÿç®¡ç† (/fleets) - 6ä¸ªç«¯ç‚¹
- GET /fleets - åˆ—å‡ºæ‰€æœ‰æœºé˜Ÿ
- GET /fleets/:id - è·å–æœºé˜Ÿè¯¦æƒ…
- GET /fleets/search/:query - æœç´¢æœºé˜Ÿ
- POST /fleets - åˆ›å»ºæœºé˜Ÿ
- PUT /fleets/:id - æ›´æ–°æœºé˜Ÿ
- DELETE /fleets/:id - åˆ é™¤æœºé˜Ÿ

#### é£æœºç®¡ç† (/aircraft) - 8ä¸ªç«¯ç‚¹
- GET /aircraft - åˆ—å‡ºæ‰€æœ‰é£æœº
- GET /aircraft/:id - è·å–é£æœºè¯¦æƒ…
- GET /aircraft?fleetId=:id - æŒ‰æœºé˜Ÿåˆ—å‡ºé£æœº
- GET /aircraft/status/counts - è·å–çŠ¶æ€ç»Ÿè®¡
- POST /aircraft - åˆ›å»ºé£æœº
- PUT /aircraft/:id - æ›´æ–°é£æœº
- PUT /aircraft/:id/status - æ›´æ–°é£æœºçŠ¶æ€
- DELETE /aircraft/:id - åˆ é™¤é£æœº

#### é›¶éƒ¨ä»¶ç®¡ç† (/components) - 9ä¸ªç«¯ç‚¹
- GET /components - åˆ—å‡ºæ‰€æœ‰é›¶éƒ¨ä»¶
- GET /components/:id - è·å–é›¶éƒ¨ä»¶è¯¦æƒ…
- GET /components/serial/:serialNumber - æŒ‰åºåˆ—å·æŸ¥è¯¢
- GET /components?aircraftId=:id - æŸ¥è¯¢é£æœºä¸Šçš„é›¶éƒ¨ä»¶
- GET /components/maintenance/due - æŸ¥è¯¢éœ€è¦ç»´ä¿çš„é›¶éƒ¨ä»¶
- POST /components - åˆ›å»ºé›¶éƒ¨ä»¶
- PUT /components/:id - æ›´æ–°é›¶éƒ¨ä»¶
- DELETE /components/:id - åˆ é™¤é›¶éƒ¨ä»¶
- POST /components/install - å®‰è£…é›¶éƒ¨ä»¶ï¼ˆå«å®Œæ•´ä¸šåŠ¡é€»è¾‘ï¼‰
- POST /components/remove - æ‹†ä¸‹é›¶éƒ¨ä»¶ï¼ˆå«å®Œæ•´ä¸šåŠ¡é€»è¾‘ï¼‰
- GET /components/:id/installations - è·å–å®‰è£…å†å²

### 5. é£è¡Œä¸æŠ€æœ¯è®°å½•æœ¬ API

#### é£è¡Œè®°å½•ç®¡ç† (/flight-logs) - 9ä¸ªç«¯ç‚¹
- GET /flight-logs/:id - è·å–é£è¡Œè®°å½•è¯¦æƒ…
- GET /flight-logs - åˆ—å‡ºé£è¡Œè®°å½•ï¼ˆæ”¯æŒæŒ‰é£æœº/é£è¡Œå‘˜ç­›é€‰ï¼‰
- POST /flight-logs - åˆ›å»ºé£è¡Œè®°å½•ï¼ˆè‡ªåŠ¨æ›´æ–°é£æœºå’Œç»„ä»¶æŒ‡æ ‡ï¼‰
- PUT /flight-logs/:id - æ›´æ–°é£è¡Œè®°å½•
- DELETE /flight-logs/:id - åˆ é™¤é£è¡Œè®°å½•ï¼ˆè½¯åˆ é™¤ï¼‰
- GET /flight-logs/aircraft/:aircraftId - è·å–é£æœºé£è¡Œå†å²
- GET /flight-logs/pilot/:pilotId - è·å–é£è¡Œå‘˜é£è¡Œè®°å½•
- GET /flight-logs/stats/daily - è·å–æ¯æ—¥é£è¡Œç»Ÿè®¡

#### é£è¡Œå‘˜æŠ¥å‘Šç®¡ç† (/pilot-reports) - 9ä¸ªç«¯ç‚¹
- GET /pilot-reports/:id - è·å–é£è¡Œå‘˜æŠ¥å‘Šè¯¦æƒ…
- GET /pilot-reports - åˆ—å‡ºé£è¡Œå‘˜æŠ¥å‘Šï¼ˆæ”¯æŒå¤šç§ç­›é€‰ï¼‰
- POST /pilot-reports - åˆ›å»ºé£è¡Œå‘˜æŠ¥å‘Š
- PUT /pilot-reports/:id - æ›´æ–°é£è¡Œå‘˜æŠ¥å‘Š
- PUT /pilot-reports/:id/status - æ›´æ–°æŠ¥å‘ŠçŠ¶æ€
- PUT /pilot-reports/:id/resolve - è§£å†³æŠ¥å‘Š
- DELETE /pilot-reports/:id - åˆ é™¤æŠ¥å‘Šï¼ˆè½¯åˆ é™¤ï¼‰
- GET /pilot-reports/aog - è·å–æ‰€æœ‰ AOG æŠ¥å‘Š
- POST /pilot-reports/:id/work-order - ä»æŠ¥å‘Šåˆ›å»ºå·¥å•

#### æ”¾è¡Œè®°å½•ç®¡ç† (/release-records) - 8ä¸ªç«¯ç‚¹
- GET /release-records/:id - è·å–æ”¾è¡Œè®°å½•è¯¦æƒ…
- GET /release-records - åˆ—å‡ºæ”¾è¡Œè®°å½•
- GET /release-records/aircraft/:aircraftId - è·å–é£æœºæ”¾è¡Œå†å²
- GET /release-records/current/:aircraftId - è·å–å½“å‰æœ‰æ•ˆæ”¾è¡Œ
- POST /release-records - åˆ›å»ºæ”¾è¡Œè®°å½•ï¼ˆä»…æ£€éªŒå‘˜å¯ç”¨ï¼‰
- PUT /release-records/:id/sign - ç­¾ç½²æ”¾è¡Œè®°å½•ï¼ˆç­¾ç½²åä¸å¯ä¿®æ”¹ï¼‰
- DELETE /release-records/:id - åˆ é™¤æ”¾è¡Œè®°å½•ï¼ˆè½¯åˆ é™¤ï¼‰
- GET /release-records/work-order/:workOrderId - æŒ‰å·¥å•æŸ¥è¯¢æ”¾è¡Œè®°å½•

### 6. ç»´ä¿®æ‰§è¡Œä¸­å¿ƒ API

#### å·¥å•ç®¡ç† (/work-orders) - 17ä¸ªç«¯ç‚¹
- GET /work-orders/:id - è·å–å·¥å•è¯¦æƒ…
- GET /work-orders - åˆ—å‡ºå·¥å•ï¼ˆæ”¯æŒæŒ‰çŠ¶æ€/é£æœº/è´Ÿè´£äººç­›é€‰ï¼‰
- POST /work-orders - åˆ›å»ºå·¥å•
- PUT /work-orders/:id - æ›´æ–°å·¥å•
- PUT /work-orders/:id/status - æ›´æ–°å·¥å•çŠ¶æ€
- PUT /work-orders/:id/assign - åˆ†é…å·¥å•
- POST /work-orders/:id/start - å¼€å§‹æ‰§è¡Œå·¥å•
- POST /work-orders/:id/complete - å®Œæˆå·¥å•ï¼ˆéœ€ RII éªŒè¯ï¼‰
- POST /work-orders/:id/release - æ”¾è¡Œå·¥å•ï¼ˆä»…æ£€éªŒå‘˜ï¼‰
- POST /work-orders/:id/cancel - å–æ¶ˆå·¥å•
- DELETE /work-orders/:id - åˆ é™¤å·¥å•

#### å·¥å•ä»»åŠ¡ç®¡ç† (/work-orders/:id/tasks) - 7ä¸ªç«¯ç‚¹
- GET /work-orders/:id/tasks - è·å–å·¥å•ä»»åŠ¡åˆ—è¡¨
- POST /work-orders/:id/tasks - æ·»åŠ ä»»åŠ¡
- POST /work-orders/:id/tasks/batch - æ‰¹é‡æ·»åŠ ä»»åŠ¡
- PUT /work-orders/tasks/:taskId - æ›´æ–°ä»»åŠ¡
- PUT /work-orders/tasks/:taskId/status - æ›´æ–°ä»»åŠ¡çŠ¶æ€
- POST /work-orders/tasks/:taskId/sign-off - ç­¾ç½² RII ä»»åŠ¡ï¼ˆä»…æ£€éªŒå‘˜ï¼‰
- DELETE /work-orders/tasks/:taskId - åˆ é™¤ä»»åŠ¡

#### å·¥å•é›¶ä»¶ç®¡ç† (/work-orders/:id/parts) - 4ä¸ªç«¯ç‚¹
- GET /work-orders/:id/parts - è·å–å·¥å•é›¶ä»¶åˆ—è¡¨
- POST /work-orders/:id/parts - æ·»åŠ é›¶ä»¶
- POST /work-orders/:id/parts/batch - æ‰¹é‡æ·»åŠ é›¶ä»¶
- DELETE /work-orders/parts/:partId - åˆ é™¤é›¶ä»¶è®°å½•

### 7. å‰ç«¯åŸºç¡€
- [x] React 19 + Vite + Tailwind CSS
- [x] MobX çŠ¶æ€ç®¡ç†
- [x] åŸºç¡€è·¯ç”±å¸ƒå±€
- [x] è®¤è¯æœåŠ¡ (ç™»å½•é¡µã€è®¤è¯çŠ¶æ€)
- [x] åŸºç¡€é¡µé¢ç»„ä»¶ (ä»ªè¡¨æ¿ã€æœºé˜Ÿåˆ—è¡¨ã€é£æœºè¯¦æƒ…)
- [x] shadcn/ui åŸºç¡€ç»„ä»¶é›†æˆ
- [x] 35+ é¡µé¢ç»„ä»¶æ¡†æ¶ï¼ˆå«é£è¡Œè®°å½•ã€å·¥å•ã€åº“å­˜ç­‰ï¼‰
- [x] è£…æœº/æ‹†ä¸‹å¯¹è¯æ¡†ç»„ä»¶

---

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯é€‰æ‹© | ç‰ˆæœ¬ |
|------|----------|------|
| Monorepo | Turborepo + pnpm | ^2.3.3, ^9.15.4 |
| åç«¯ | NestJS | ^10.x |
| å‰ç«¯ | React + MobX | ^19.x |
| UI ç»„ä»¶ | shadcn/ui + Tailwind CSS | ^3.x |
| ORM | Drizzle ORM | ^0.36.x |
| æ•°æ®åº“ | PostgreSQL + PostGIS | 16+ |
| è®¤è¯ | JWT + bcrypt | - |
| æ ¡éªŒ | Zod | ^3.x |
| çŠ¶æ€ç®¡ç† | MobX | ^6.x |
| è·¯ç”± | React Router v7 | ^7.x |

---

## é—ç•™é—®é¢˜

### é«˜ä¼˜å…ˆçº§
1. ~~**æ•°æ®åº“è¿ç§»**~~ - âœ… å·²ç”Ÿæˆè¿ç§»æ–‡ä»¶ `0000_lean_lionheart.sql`ï¼Œå¾…æ‰§è¡Œ
2. ~~**è£…æœº/æ‹†ä¸‹äº‹åŠ¡**~~ - âœ… å·²å®Œæˆå®Œæ•´ä¸šåŠ¡é€»è¾‘å®ç°
3. **å‰ç«¯ UI ç»„ä»¶** - shadcn/ui ç»„ä»¶å°šæœªå®Œå…¨é›†æˆ

### ä¸­ä¼˜å…ˆçº§
4. **æµ‹è¯•è¦†ç›–** - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•å¾…æ·»åŠ 
5. **é”™è¯¯å¤„ç†** - ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½æç¤º
6. **æ—¥å¿—ç³»ç»Ÿ** - ç»“æ„åŒ–æ—¥å¿—å’Œå®¡è®¡è¿½è¸ª

### ä½ä¼˜å…ˆçº§
7. **API æ–‡æ¡£** - Swagger/OpenAPI æ–‡æ¡£
8. **æ€§èƒ½ä¼˜åŒ–** - æŸ¥è¯¢ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥

---

## ä¸‹ä¸€æ­¥å·¥ä½œ (Phase 1)

### çŸ­æœŸç›®æ ‡
1. æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼Œå»ºç«‹å¼€å‘ç¯å¢ƒ
2. è¿è¡Œ seed è„šæœ¬å¡«å……æµ‹è¯•æ•°æ®
3. å®Œå–„ API é›†æˆæµ‹è¯•
4. å®Œå–„å‰ç«¯é¡µé¢ UI

### ä¸­æœŸç›®æ ‡
1. ç»´ä¿è°ƒåº¦å¼•æ“ - å¤šè§¦å‘å™¨è®¡ç®—
2. è®¡åˆ’ä¸å·¥ç¨‹ä¸­å¿ƒ API
3. åº“å­˜ç®¡ç† - èˆªæåº“å­˜
4. æ•°æ®çœ‹æ¿ - ç»Ÿè®¡åˆ†æ

è¯¦ç»†çš„ Phase 1 è®¡åˆ’è¯·å‚è§ [`/docs/progress/phase-1-plan.md`](./progress/phase-1-plan.md)

---

## æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| é¡¹ç›®è¿›å±•æŠ¥å‘Š | `/docs/PROJECT_STATUS.md` | æœ¬æ–‡æ¡£ |
| Phase 1 è®¡åˆ’ | `/docs/progress/phase-1-plan.md` | ä¸‹ä¸€é˜¶æ®µå®æ–½è®¡åˆ’ |
| å‰ç«¯å¼€å‘è§„åˆ’ | `/docs/frontend-development-plan.md` | å‰ç«¯é¡µé¢å¼€å‘é˜¶æ®µè§„åˆ’ |
| å®ŒæˆæŠ¥å‘Š | `/docs/reports/completed/` | å·²å®Œæˆé˜¶æ®µçš„è¯¦ç»†æŠ¥å‘Š |
| å‰ç«¯é¡µé¢è¯„ä¼° | `/docs/reports/frontend-pages-assessment.md` | å‰ç«¯å®ç°çŠ¶æ€è¯„ä¼° |
| æ¸…ç†æŠ¥å‘Š | `/docs/reports/cleanup-report.md` | å†—ä½™å†…å®¹æ¸…ç†è®°å½• |
| æ–‡ä»¶ç»“æ„è§„èŒƒ | `/docs/standards/file-structure.md` | ä»£ç ç»„ç»‡è§„èŒƒ |
| å‘½åè§„èŒƒ | `/docs/standards/naming-conventions.md` | å‘½åçº¦å®š |
| ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸ | `/docs/standards/user-lifecycle.md` | ç”¨æˆ·è§’è‰²ä¸ä¸šåŠ¡æµç¨‹ |
| è¿›åº¦æ–‡æ¡£æ¨¡æ¿ | `/docs/templates/progress-template.md` | è¿›åº¦æ–‡æ¡£æ¨¡æ¿ |
| å®ŒæˆæŠ¥å‘Šæ¨¡æ¿ | `/docs/templates/completed-template.md` | å®ŒæˆæŠ¥å‘Šæ¨¡æ¿ |
